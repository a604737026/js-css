<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>选水果封装函数版本</title>
  <style>
    select {
      width: 100px;
      height: 150px;
    }
  </style>
</head>
<body>
<select name="" id="all" multiple>
  <option value="">西瓜</option>
  <option value="">香蕉</option>
  <option value="">桔子</option>
  <option value="">苹果</option>
  <option value="">梨</option>
  <option value="">荔枝</option>
</select>
<input type="button" value=">>" id="btn1"/>
<input type="button" value="<<" id="btn2"/>
<input type="button" value=">" id="btn3"/>
<input type="button" value="<" id="btn4"/>
<select name="" id="sel" multiple>

</select>


</body>
</html>
<script src="common.js"></script>
<script>
  // 1. 先获得要操作的对象
  var btn1 = $$("btn1");
  var btn2 = $$("btn2");
  var btn3 = $$("btn3");
  var btn4 = $$("btn4");

  // 2. 给事件源注册事件
  btn1.onclick = function (){


    moveAll("all","sel");
  }
  // 3. 给第二个按钮注册事件，将右侧的所有的options移动到左侧
  btn2.onclick = function (){

    moveAll("sel","all");
  }

  /**
   * 封装了一个从源来的标签追加到目标位置的函数
   */
  function moveAll(source,target){
    var source = $$(source);
    var target = $$(target);
    var options = source.children;
    for(var i=0;i<options.length;i++){
      target.appendChild(options[i]);
      i--;
    }
  }

  // 4. 给第三个按钮注册事件
  btn3.onclick = function (){

    moveSelected("all","sel");
  }

  // 5. 给第四个按钮注册事件
  btn4.onclick = function (){

    moveSelected("sel","all");
  }

  /**
   * 封装了一个将选中option移动另一侧的函数
   */
  function moveSelected(source,target){
    var source = $$(source);
    var target = $$(target);
    var options = source.children;
    for(var i=0;i<options.length;i++){
      if(options[i].selected){
        target.appendChild(options[i]);
        i--;
      }
    }
  }
</script>